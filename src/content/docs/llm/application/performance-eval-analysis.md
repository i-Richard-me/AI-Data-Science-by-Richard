---
title: 利用大模型进行实体及属性抽取
description: 探索大语言模型在实体及属性抽取任务中的能力。
---

在之前的案例中，我们已经介绍了如何使用大语言模型从文本数据中进行情绪分类和主题分类任务。本篇将进一步探索，利用大模型的推理能力，进行进行实体及属性抽取，以从员工绩效评价文本中抽取关键能力标签为例。

## 案例说明

本案例基于上级对员工的绩效评价，目的是评估员工在以下几个维度的能力：业务与专业能力、协作与沟通能力、领导与管理能力、创新与适应能力、职业操守与自我管理能力。通过分析评价内容，模型能够推理出员工在这些能力维度的表现级别。

:::caution
能力评估维度是根据具体案例简化而来。实际应用中，建议采用成熟的胜任力测评工具。

如 Hay、Aon、德勤、北森等，均提供了相对科学且全面的胜任力评估维度和标准。
:::

:::note
测试的文本样本依旧使用 ChatGPT 辅助生成，如有雷同，纯属巧合。
:::

## 任务执行过程

### 1. 构建提示词

为了引导大模型正确理解并执行任务，我们构建了如下的提示词模板：

```python
evaluation_prompt = """
    作为人力资源专家，你的任务是分析绩效评价报告，从中评估员工在各个能力维度的表现。请按照以下步骤操作：

    1. 理解评价内容：深入阅读绩效评价文本，理解其中的描述和评价。
    2. 能力评估：根据绩效评价文本，评估员工在以下能力维度的表现级别：业务与专业能力，协作与沟通能力，领导与管理能力，创新与适应能力，职业操守与自我管理能力。根据评价内容，将能力表现分为“高”、“中”、“低”三个级别。
    3. 给出理由：为你的评估提供依据，即根据评价内容中的具体描述或表现，解释为何该员工在某个能力维度的评级为高、中、低或未知。
    4. 输出格式：将每个评估维度的评估结果以及评估理由以JSON格式输出，确保格式的准确性和易读性。
        例如：业务与专业能力：["能力等级": "高", "评估理由": "员工在过去一年中，展现出了高超的业务技能，能够独立完成复杂的业务任务。"]

    请根据提供的绩效评价内容进行分析，避免任何主观臆断，确保评估结果客观、公正。

    注意事项：
    - 深入理解评价内容，确保评估准确性。
    - 使用明确的级别（“高”、“中”、“低”、“未知”）来描述员工的能力。
    - 提供评估理由，确保理由与评价内容直接相关，并适当地处理信息缺失的情况。
    - 确保输出格式正确，便于阅读和理解。

    员工ID与绩效评价 
    >>>{query}<<<
    """
```

### 2. 构建任务模型

使用 Langchain 建任务，通过下面的代码定义如何获取评价数据并执行任务：

```python
prompt = PromptTemplate(
    template=evaluation_prompt,
    input_variables=["query"],
)

chain = prompt | model

def get_query(i):
    query = {
        "ID": data.loc[i, "emp"],
        "text": data.loc[i, "上级评价"]
    }
    return query
```

### 3. 效果测试

测试文本如下，用以评估模型的输出效果：

```python
text = """
    在本年度前半段，整体绩效尚算令人满意，尽管有些目标的更新稍显迟缓，这提示我们应持续设立更高的标准。
    进入下半年，有几个领域需要我们特别注意：首先，应对个人及团队施加更高的期望，确保目标能够及时得到刷新，以适应业务发展的最新需求，并用这些目标来引领团队和个人的工作方向。
    其次，在日常工作中，除了需要能够灵活应对外，还要注重创新并有计划地追踪进展，这样可以提高我们的主动性和前瞻性。
    最后，要加大与同事及上级的积极沟通，增强个人的影响力，并在团队中承担更多的责任。
"""

chain_result = chain.invoke({"query": text})
```

大模型输出的评估结果如下：

```text
{'业务与专业能力': {'能力等级': '高', '评估理由': "评价中提到'拿结果能力强'，表明员工在业务和专业方面具有出色的能力。"},
 '协作与沟通能力': {'能力等级': '未知', '评估理由': '评价中没有提及员工在协作和沟通方面的表现。'},
 '领导与管理能力': {'能力等级': '未知', '评估理由': '评价中没有提及员工在领导和管理方面的表现。'},
 '创新与适应能力': {'能力等级': '高', '评估理由': "评价中提到'自我迭代意识强'，表明员工具有创新和适应变化的能力。"},
 '职业操守与自我管理能力': {'能力等级': '高', '评估理由': "评价中提到'价值观正'，表明员工具有良好的职业操守和自我管理能力。"}}
```

可以看到，大模型基本给出了我们可以接受的回答。

:::tip
当然，为了进一步提升评估效果，依然有很多优化策略，例如每个任务只单独评估一个能力维度，并为每个维度提供判断标准和示例案例，都是提高评估的准确性的有效手段。
:::